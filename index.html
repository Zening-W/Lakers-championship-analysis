<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lakers Score Distribution</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <div id="buttons"></div>
    <div id="chart"></div>
    <script>
        // Sample data for one year
        const data = [
            { player: "Player A", score: 10 },
            { player: "Player B", score: 30 },
            { player: "Player C", score: 20 },
            { player: "Player D", score: 40 }
        ];

        // Set dimensions and margins for the pie chart
        const width = 450, height = 450, margin = 40;
        const radius = Math.min(width, height) / 2 - margin;

        // Append SVG object to the body of the page
        const svg = d3.select("#chart")
            .append("svg")
            .attr("width", width)
            .attr("height", height)
            .append("g")
            .attr("transform", `translate(${width / 2}, ${height / 2})`);

        // Set the color scale
        const color = d3.scaleOrdinal()
            .domain(data.map(d => d.player))
            .range(d3.schemeCategory10);

        // Compute the position of each group on the pie
        const pie = d3.pie()
            .value(d => d.score);

        const data_ready = pie(data);

        // Build the pie chart
        svg
            .selectAll('whatever')
            .data(data_ready)
            .enter()
            .append('path')
            .attr('d', d3.arc()
                .innerRadius(0)
                .outerRadius(radius)
            )
            .attr('fill', d => color(d.data.player))
            .attr("stroke", "white")
            .style("stroke-width", "2px")
            .style("opacity", 0.7);

        // Add interactive tooltips
        svg.selectAll('path')
            .on('mouseover', function (event, d) {
                d3.select(this).transition()
                    .duration('50')
                    .attr('opacity', '.85');
                d3.select("#chart").append("text")
                    .attr('id', 'tooltip')
                    .style("transform", "translate(-50%, -100px)")
                    .style("text-anchor", "middle")
                    .text(`${d.data.player}: ${d.data.score} points`);
            })
            .on('mouseout', function (d) {
                d3.select(this).transition()
                    .duration('50')
                    .attr('opacity', '1');
                d3.select("#tooltip").remove();
            });
    </script>
</body>
</html>
